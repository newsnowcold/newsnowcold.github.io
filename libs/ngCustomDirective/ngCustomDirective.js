!function(e){e.module("app",["ngMaterial","directives.custom-range-date-picker","directives.category-item-selector"]).controller("appCtrl",["$scope",function(e){var t=new Date,a=t.setDate(t.getDate()+1);e.customDateConfig={startDate:t,endDate:new Date(a),defaultOptionIndex:0,format:"",options:[{label:"Past 7 days",func:function(){var e=new Date,t=new Date;return e.setDate(e.getDate()-6),{startDate:e,endDate:t}}},{label:"This month",func:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);return{startDate:t,endDate:a}}},{label:"Last month",func:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0);return{startDate:t,endDate:a}}},{label:"This year",func:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),11,31);return{startDate:t,endDate:a}}}]},e.categorySelectorConfig=[{category:"banana",items:[{label:"banna1",value:!0},{label:"banna2",value:!0}]},{category:"apple",items:[{label:"apple1",value:!0},{label:"apple2",value:!0},{label:"apple3",value:!0}]},{category:"coconut",items:[{label:"coconut1",value:!0},{label:"coconut2",value:!0},{label:"coconut3",value:!0}]}]}])}(angular),angular.module("directives.custom-range-date-picker",[]).directive("customRangeDatePicker",["$filter",function(e){var t='<div class="custom-date-range-picker-wrapper">         <div class="date-label" ng-click="openDateRangeOptionSelection()">             <span ng-bind="selectedOptionLabel"></span>         </div>         <div class="date-selection"              layout="column"              ng-show="isSelectionOpen">             <!-- //error messages -->             <div class="error-item"                  ng-bind="error"                  ng-repeat="error in errorMessages">             </div>             <div>                 <div class="dropdown-label field"                      ng-click="openOptionsSelection()"                      ng-bind="temptSelectedOptionLabel"></div>                 <div class="dropdown-options"                      ng-show="isOptionSelectionOpen"                      layout="column"                      layout-align="center center">                     <div ng-repeat="option in options"                          ng-bind="option.label"                          ng-click="optionSelected(option.label)">                     </div>                 </div>             </div>             <div ng-if="temptSelectedOptionLabel == \'Custom period\'"                  layout="row"                  layout-align="space-between center"                  class="custom-date-range">                 <md-datepicker ng-model="customDates.startDate" md-placeholder="Enter date"></md-datepicker>                 <md-datepicker ng-model="customDates.endDate" md-placeholder="Enter date"></md-datepicker>              </div>             <div class="footer"                  layout="row"                  layout-align="end">                 <button class="button cancel" ng-click="cancel()">Cancel</button>                 <button class="button apply" ng-click="save()">Apply</button>             </div>         </div>     </div>';return{restrict:"E",template:t,scope:{config:"="},link:function(t,a,n,o){var i=function(){t.isOptionSelectionOpen=!t.isOptionSelectionOpen},l=function(e){for(var a=t.options,n=a.length,o=0;n>o;o++){var i=a[o];if(i.label==e){t.selectedOptionAction=i.func,t.optionIndex=o,t.temptSelectedOptionLabel=i.label;break}}t.isOptionSelectionOpen=!1},r=function(){t.errorMessages=[],t.isSelectionOpen=!t.isSelectionOpen},c=function(){var e=!0,a=t.customDates;return a.startDate&&a.endDate?a.startDate>a.endDate?e=!1:("Invalid Date"==a.startDate||"Invalid Date"==!a.endDate)&&(e=!1):e=!1,e},s=function(){var e=!0,a=t.customDates;return t.errorMessages=[],a.startDate&&a.endDate?c()?e:(t.errorMessages.push("Error invalid dates"),e=!1):(a.startDate||a.endDate?a.startDate?(a.errorMessages.push("Error no end date"),e=!1):(t.errorMessages.push("Error no start date"),e=!1):(t.errorMessages.push("Error no dates"),e=!1),e)},d=function(a){var n=a?a:t.customDates,o=n.startDate,i=n.endDate,l=t.config.format;return e("date")(o,l)+" - "+e("date")(i,l)},g=function(){var e=new Date;t.customDates={startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:new Date}},p=function(){t.isSelectionOpen=!1},u=function(){if(s()){var e=t.selectedOptionAction();t.config.startDate=e.startDate,t.config.endDate=e.endDate,t.config.defaultOptionIndex=t.optionIndex,t.selectedOptionLabel=t.temptSelectedOptionLabel,"Custom period"==t.temptSelectedOptionLabel&&(t.selectedOptionLabel=d(t.customDates)),t.isSelectionOpen=!1}};t.selectedOptionAction,t.errorMessages=[],t.cancel=p,t.save=u,t.openDateRangeOptionSelection=r,g(),t.options=t.config.options,t.options.push({label:"Custom period",func:function(){return t.customDates}}),t.optionIndex=t.config.defaultOptionIndex,t.selectedOptionLabel=t.options[t.optionIndex].label,t.temptSelectedOptionLabel=t.selectedOptionLabel,t.selectedOptionAction=t.options[t.optionIndex].func,t.openOptionsSelection=i,t.isOptionSelectionOpen=!1,t.optionSelected=l}}}]),angular.module("directives.category-item-selector",[]).directive("categoryItemSelector",["$timeout",function(e){var t='<div class="category-item-selector-wrapper">         <div class="category-selector-label">             <button class="category-item-btn"                     ng-bind="label"                     ng-click="openCloseSelector()">             </button>         </div>         <div layout="column"              ng-show="isCategoryDisplayed"              class="category-selector">             <div class="categories">                 <md-radio-group                     ng-model="selectedCategory">                         <md-radio-button                              class="category md-primary"                              ng-repeat="category in categories"                              ng-value="category.category"                               ng-style="{\'display\':\'inline\'}">                              {{::category.category}}                         </md-radio-button>                 </md-radio-group>             </div>             <div class="category-items">                 <md-checkbox                     class="items md-primary"                     ng-repeat="item in items"                     ng-model="items[selectedCategory][item.label]"                     aria-label="item.label"                     ng-init="items[selectedCategory][item.label]=item.value"                     ng-style="{\'display\':\'block\'}">                 {{::item.label}}             </div>             <div class="action-buttons">                 <button class="category-item-btn save" ng-click="save()">Save</button>                 <button class="category-item-btn cancel" ng-click="cancel()">Cancel</button>             </div>         </div>     </div>';return{restrict:"E",template:t,scope:{config:"=",defaultCategory:"@",label:"@"},link:function(e,t,a,n){var o=function(){var t=e.config.length,a=e.defaultCategory,n=0;if(e.defaultCategory&&e.defaultCategory.length>0)for(var o=0;t>o;o++)if(e.config[o].category==a){n=o;break}return n},i=function(){for(var t=e.config.length,a=e.selectedCategory,n=[],o=0;t>o;o++)if(e.config[o].category==a){n=e.config[o].items;break}return n},l=function(){e.isCategoryDisplayed=!e.isCategoryDisplayed,e.items=[],e.items=i(),console.log(e.items)},r=function(){for(var t=e.config.length,a=e.selectedCategory,n=0;t>n;n++)if(e.config[n].category==a)for(var o=e.config[n].items,i=o.length,l=0;i>l;l++){var r=o[l].label;e.config[n].items[l].value=e.items[a][r]}e.isCategoryDisplayed=!1},c=function(){e.isCategoryDisplayed=!1,e.items[e.selectedCategory]=void 0,console.log(e.items)},s=o();e.cancel=c,e.save=r,e.categories=angular.copy(e.config),e.selectedCategory=e.categories[s].category,e.openCloseSelector=l,e.isCategoryDisplayed=!1,e.$watch("selectedCategory",function(){e.items=i()}),$("*").on("click",function(a){e.isCategoryDisplayed&&($(a.target).closest(t).length||c())})}}}]);