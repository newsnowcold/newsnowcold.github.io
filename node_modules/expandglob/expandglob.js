/**
 * Expand multiple glob patterns.
 */

"use strict";

var argx = require('argx'),
    glob = require('glob'),
    async = require('async'),
    arrayreduce = require('arrayreduce');

/** @lends expandglob */
function expandglob(patterns, options, callback) {
    var args = argx(arguments);
    callback = args.pop('function') || argx.noop;
    options = args.pop('object') || {};

    patterns = [].concat(patterns || []);
    async.concat(patterns, function (pattern, callback) {
        glob(pattern, options, callback);
    }, callback);
}

expandglob.sync = function (patterns, options) {
    return [].concat(patterns || []).map(function (pattern) {
        return glob.sync(pattern, options);
    }).reduce(arrayreduce.arrayConcat(), []);
};

module.exports = expandglob;